DROP SEQUENCE ENROLL_SEQ;
DROP SEQUENCE LECTURE_SEQ;
DROP TABLE LECTURE_TBL;
DROP TABLE ENROLL_TBL;
DROP TABLE STUDENT_TBL;
DROP TABLE COURSE_TBL;
DROP TABLE PROFESSOR_TBL;

CREATE TABLE PROFESSOR_TBL (
    PROFESSOR_NO   VARCHAR2(10) NULL,
    PROFESSOR_NAME VARCHAR2(10) NOT NULL,
    MAJOR          VARCHAR2(30) NOT NULL,
    CONSTRAINT PK_PROFESSOR PRIMARY KEY ( PROFESSOR_NO )
);

CREATE TABLE COURSE_TBL (
    COURSE_NO    VARCHAR2(10) NOT NULL,
    COURSE_NAME  VARCHAR2(30) NOT NULL,
    COURSE_GRADE VARCHAR2(2),
    CONSTRAINT PK_COURSE PRIMARY KEY ( COURSE_NO )
);

CREATE TABLE STUDENT_TBL (
    STUDENT_NO      VARCHAR2(10) NOT NULL,
    STUDENT_NAME    VARCHAR2(10) NOT NULL,
    STUDENT_ADDRESS VARCHAR2(30),
    STUDENT_YEAR    NUMBER(1),
    PROFESSOR_NO    VARCHAR2(10),
    CONSTRAINT PK_STUDENT PRIMARY KEY ( STUDENT_NO ),
    CONSTRAINT FK_PROFESSOR_STUDENT FOREIGN KEY ( PROFESSOR_NO )
        REFERENCES PROFESSOR_TBL ( PROFESSOR_NO )
);

CREATE TABLE ENROLL_TBL (
    ENROLL_NO   NUMBER NOT NULL,
    STUDENT_NO  VARCHAR2(10) NOT NULL,
    COURSE_NO   VARCHAR2(10) NOT NULL,
    ENROLL_DATE DATE NOT NULL,
    CONSTRAINT PK_ENROLL PRIMARY KEY ( ENROLL_NO ),
    CONSTRAINT FK_STUDENT_ENROLL FOREIGN KEY ( STUDENT_NO )
        REFERENCES STUDENT_TBL ( STUDENT_NO ),
    CONSTRAINT FK_COURSE_ENROLL FOREIGN KEY ( COURSE_NO )
        REFERENCES COURSE_TBL ( COURSE_NO )
);

CREATE TABLE LECTURE_TBL (
    LECTURE_NO   NUMBER NOT NULL,
    PROFESSOR_NO VARCHAR2(10),
    ENROLL_NO    NUMBER,
    LECTURE_NAME VARCHAR2(50),
    LECTURE_ROOM VARCHAR2(20),
    CONSTRAINT PK_LECTURE PRIMARY KEY ( LECTURE_NO ),
    CONSTRAINT FK_PROFESSOR_LECTURE FOREIGN KEY ( PROFESSOR_NO )
        REFERENCES PROFESSOR_TBL ( PROFESSOR_NO ),
    CONSTRAINT FK_ENROLL_LECTURE FOREIGN KEY ( ENROLL_NO )
        REFERENCES ENROLL_TBL ( ENROLL_NO )
);
    
--교수 테이블 행 삽입
INSERT INTO PROFESSOR_TBL (PROFESSOR_NO, PROFESSOR_NAME, MAJOR)
                    VALUES ('P1', '나교수', '생물학');

INSERT INTO PROFESSOR_TBL (PROFESSOR_NO, PROFESSOR_NAME, MAJOR)
                    VALUES ('P2', '김교수', '물리학');

INSERT INTO PROFESSOR_TBL (PROFESSOR_NO, PROFESSOR_NAME, MAJOR)
                    VALUES ('P3', '이교수', '컴퓨터과학');

-- 과목테이블에 행 삽입

INSERT INTO COURSE_TBL (COURSE_NO, COURSE_NAME, COURSE_GRADE)
                VALUES ('C1', '생물학II', 'C');

INSERT INTO COURSE_TBL (COURSE_NO, COURSE_NAME, COURSE_GRADE)
                VALUES ('C2', '물리학III', 'D');

INSERT INTO COURSE_TBL (COURSE_NO, COURSE_NAME, COURSE_GRADE)
                VALUES ('C3', '컴퓨터구조', 'C+');

-- 학생테이블 행 삽입
INSERT INTO STUDENT_TBL (
    STUDENT_NO,
    STUDENT_NAME,
    STUDENT_ADDRESS,
    STUDENT_YEAR,
    PROFESSOR_NO
) VALUES (
    'S1',
    '김범철',
    '금천구 어쩌고',
    4,
    'P1'
);

INSERT INTO STUDENT_TBL (
    STUDENT_NO,
    STUDENT_NAME,
    STUDENT_ADDRESS,
    STUDENT_YEAR,
    PROFESSOR_NO
) VALUES (
    'S2',
    '김학생',
    '구로구 어쩌고',
    1,
    'P2'
);

INSERT INTO STUDENT_TBL (
    STUDENT_NO,
    STUDENT_NAME,
    STUDENT_ADDRESS,
    STUDENT_YEAR,
    PROFESSOR_NO
) VALUES (
    'S3',
    '김외국',
    '미국 어쩌고',
    2,
    'P3'
);


-- 수강신청테이블 행 삽입
CREATE SEQUENCE ENROLL_SEQ INCREMENT BY 1 START WITH 1 ORDER;

INSERT INTO ENROLL_TBL (
    ENROLL_NO,
    STUDENT_NO,
    COURSE_NO,
    ENROLL_DATE
) VALUES (
    ENROLL_SEQ.NEXTVAL,
    'S1',
    'C1',
    '2023-07-03'
);

INSERT INTO ENROLL_TBL (
    ENROLL_NO,
    STUDENT_NO,
    COURSE_NO,
    ENROLL_DATE
) VALUES (
    ENROLL_SEQ.NEXTVAL,
    'S2',
    'C2',
    '2023-07-03'
);

INSERT INTO ENROLL_TBL (
    ENROLL_NO,
    STUDENT_NO,
    COURSE_NO,
    ENROLL_DATE
) VALUES (
    ENROLL_SEQ.NEXTVAL,
    'S3',
    'C3',
    '2023-07-03'
);
    

-- 강의테이블 행 삽입
CREATE SEQUENCE LECTURE_SEQ INCREMENT BY 1 START WITH 100 ORDER;

INSERT INTO LECTURE_TBL (
    LECTURE_NO,
    PROFESSOR_NO,
    ENROLL_NO,
    LECTURE_NAME,
    LECTURE_ROOM
) VALUES (
    LECTURE_SEQ.NEXTVAL,
    'P1',
    1,
    '내가 집에 가야하는 이유',
    '3층 301호'
);

INSERT INTO LECTURE_TBL (
    LECTURE_NO,
    PROFESSOR_NO,
    ENROLL_NO,
    LECTURE_NAME,
    LECTURE_ROOM
) VALUES (
    LECTURE_SEQ.NEXTVAL,
    'P2',
    2,
    '귀가와 물리학에 대하여',
    '3층 302호'
);

INSERT INTO LECTURE_TBL (
    LECTURE_NO,
    PROFESSOR_NO,
    ENROLL_NO,
    LECTURE_NAME,
    LECTURE_ROOM
) VALUES (
    LECTURE_SEQ.NEXTVAL,
    'P3',
    3,
    '컴퓨터로 집에 가는 법',
    '3층 303호'
);

COMMIT;